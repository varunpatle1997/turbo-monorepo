import { pino } from 'pino';
import { env as _env } from './env.js';
const PinoLevelToSeverityLookup = {
    trace: 'DEBUG',
    debug: 'DEBUG',
    info: 'INFO',
    warn: 'WARNING',
    error: 'ERROR',
    fatal: 'CRITICAL',
};
const env = _env.get();
export const logger = pino({
    level: env.LOG_LEVEL,
    messageKey: 'message',
    redact: ['req.headers.authorization'],
    formatters: {
        level(label, number) {
            return {
                severity: PinoLevelToSeverityLookup[label] || PinoLevelToSeverityLookup.info,
                level: number,
            };
        },
    },
    transport: env.LOG_MODE === 'file'
        ? { target: 'pino/file', options: { destination: env.LOG_FILE } }
        : undefined,
});
export default logger;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2xvZ2dlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sTUFBTSxDQUFBO0FBQzNCLE9BQU8sRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBRXRDLE1BQU0seUJBQXlCLEdBQUc7SUFDaEMsS0FBSyxFQUFFLE9BQU87SUFDZCxLQUFLLEVBQUUsT0FBTztJQUNkLElBQUksRUFBRSxNQUFNO0lBQ1osSUFBSSxFQUFFLFNBQVM7SUFDZixLQUFLLEVBQUUsT0FBTztJQUNkLEtBQUssRUFBRSxVQUFVO0NBQ1QsQ0FBQTtBQUVWLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUV0QixNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDO0lBQ3pCLEtBQUssRUFBRSxHQUFHLENBQUMsU0FBUztJQUNwQixVQUFVLEVBQUUsU0FBUztJQUNyQixNQUFNLEVBQUUsQ0FBQywyQkFBMkIsQ0FBQztJQUNyQyxVQUFVLEVBQUU7UUFDVixLQUFLLENBQUMsS0FBSyxFQUFFLE1BQU07WUFDakIsT0FBTztnQkFDTCxRQUFRLEVBQ04seUJBQXlCLENBQUMsS0FBSyxDQUFDLElBQUkseUJBQXlCLENBQUMsSUFBSTtnQkFDcEUsS0FBSyxFQUFFLE1BQU07YUFDZCxDQUFBO1FBQ0gsQ0FBQztLQUNGO0lBQ0QsU0FBUyxFQUNQLEdBQUcsQ0FBQyxRQUFRLEtBQUssTUFBTTtRQUNyQixDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxFQUFFLFdBQVcsRUFBRSxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUU7UUFDakUsQ0FBQyxDQUFDLFNBQVM7Q0FDaEIsQ0FBQyxDQUFBO0FBRUYsZUFBZSxNQUFNLENBQUEifQ==